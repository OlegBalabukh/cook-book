(this["webpackJsonpcook-book"]=this["webpackJsonpcook-book"]||[]).push([[0],{46:function(e,t,n){},65:function(e,t,n){e.exports=n(95)},92:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(7),c=n.n(i),o=n(38),s=n(16),l=n(136),d=n(27),u=n(138),p=n(134),m=n(133),f=n(139),g=n(135),b=n(128),v=Object(b.a)((function(e){return{container:{display:"flex",flexWrap:"wrap",flexDirection:"column"},formControl:{margin:e.spacing(1),minWidth:120},textFieldRecipeName:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:250},textFieldIngredients:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:500},newRecipeButton:{margin:e.spacing(2),fontWeight:600},button:{fontWeight:600,marginLeft:"15px"}}}));function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e){var t=v(),n=e.id,a=e.name,i=e.ingredients,c=e.edit,o={name:!1,ingredients:!1},d=n?"Edit Recipe":"Add Recipe",b=r.a.useState({name:a,ingredients:i,id:n}),E=Object(s.a)(b,2),O=E[0],h=E[1],j=r.a.useState(o),R=Object(s.a)(j,2),w=R[0],N=R[1],V=function(){e.cancelConfirmation(),N(o)};return r.a.createElement(u.a,{disableBackdropClick:!0,disableEscapeKeyDown:!0,open:c},r.a.createElement(f.a,null,"Fill the form"),r.a.createElement(m.a,null,r.a.createElement("form",{className:t.container},r.a.createElement(g.a,{id:"standard-basic",className:t.textFieldRecipeName,label:"Recipe",margin:"normal",fullWidth:!1,autoComplete:"off",onChange:function(e){var t=e.target.value;h(y({},O,{name:t,id:Date.now()})),N(y({},w,{name:!1}))},defaultValue:a,error:w.name,helperText:w.name?"Empty field!":" "}),r.a.createElement(g.a,{id:"standard-basic",className:t.textFieldIngredients,label:"Ingredients (separated by commas)",margin:"normal",multiline:!0,fullWidth:!0,onChange:function(e){var t=e.target.value;h(y({},O,{ingredients:t})),N(y({},w,{ingredients:!1}))},defaultValue:i,error:w.ingredients,helperText:w.ingredients?"Empty field!":" "}))),r.a.createElement(p.a,null,r.a.createElement(l.a,{onClick:V,variant:"outlined",color:"secondary",className:t.button},"Close"),r.a.createElement(l.a,{onClick:function(){var t=O.name,n=O.ingredients;""===t||""===n?""===O.name?N(y({},w,{name:!0})):N(y({},w,{ingredients:!0})):(e.handleInput(O),V())},variant:"outlined",color:"primary",className:t.button},d)))}function h(e){var t=e.addRecipe,n=v(),a="",i="",c="",o=r.a.useState(!1),d=Object(s.a)(o,2),u=d[0],p=d[1],m=function(){p(!1)};return r.a.createElement("div",null,r.a.createElement(l.a,{onClick:function(){p(!0)},className:n.newRecipeButton,variant:"outlined",color:"primary"},"Add new Recipe"),u&&r.a.createElement(O,{id:c,name:a,edit:u,ingredients:i,handleInput:function(e){t(e),m()},cancelConfirmation:m}))}n(46);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=function(e){var t=v(),n=e.recipe,i=n._id,c=n.id,o=n.name,d=n.date,u=n.ingredients,p=n.isFocused,m=n.oldVersions,f=e.deleteRecipe,g=e.setActiveRecipe,b=e.updateRecipe,E=Object(a.useState)(!1),y=Object(s.a)(E,2),h=y[0],j=y[1],w=Object(a.useState)(!1),N=Object(s.a)(w,2),V=N[0],A=N[1];return r.a.createElement("div",{className:"recipe"},r.a.createElement("div",{className:p?"focusRecipe":"header",onClick:function(){g(c),p||V?!0===p&&A(!V):A(!0)}},r.a.createElement("h6",{className:"recipeName"},o,m.length>0&&r.a.createElement("p",{id:"updated"},r.a.createElement("span",null,"updated"),r.a.createElement("span",{id:"oldVersions",className:"badge badge-pill"},m.length))),r.a.createElement("div",{className:"date"},d)),p&&V&&r.a.createElement("div",{className:"ingredients"},r.a.createElement("div",{className:"ingHeader"},"Ingredients"),r.a.createElement("ul",null,u.split(",").map((function(e,t){return r.a.createElement("li",{key:t},e)}))),r.a.createElement("div",{id:"buttons"},r.a.createElement(l.a,{onClick:function(){return j(!0)},variant:"outlined",color:"primary",className:t.button},"EDIT"),r.a.createElement(l.a,{onClick:function(){return f(i)},variant:"outlined",color:"secondary",className:t.button},"DELETE")),h&&r.a.createElement(O,{id:c,name:o,edit:h,ingredients:u,handleInput:function(e){j(!1);var t={id:c,name:o,ingredients:u,date:d,isFocused:!1},n={edited:R({},e,{id:Date.now(),_id:i}),oldVersion:t};b(n)},cancelConfirmation:function(){return j(!1)}})))},N=function(e){var t=v(),n=e.recipe,i=n.id,c=n.name,o=n.date,d=n.ingredients,u=n.isFocused,p=e.deleteVersion,m=e.setActiveVersion,f=e._id,g=Object(a.useState)(!1),b=Object(s.a)(g,2),E=b[0],y=b[1];return r.a.createElement("div",{className:"recipe"},r.a.createElement("div",{className:u?"focusVersion":"header",onClick:function(){m(i),u||E?!0===u&&y(!E):y(!0)}},r.a.createElement("h6",{className:"versionDate"}," ",c),r.a.createElement("div",{className:"date"},o)),u&&E&&r.a.createElement("div",{className:"ingredients"},r.a.createElement("div",{className:"ingHeader"},"Ingredients"),r.a.createElement("ul",null,d.split(",").map((function(e,t){return r.a.createElement("li",{key:t},e)}))),r.a.createElement(l.a,{onClick:function(){p({_id:f,id:i})},variant:"outlined",color:"secondary",className:t.button},"DELETE")))},V=n(15),A=n.n(V),k=function(){return function(e){A.a.get("/recipes/").then((function(e){return e.data})).then((function(t){return e({type:"App@getRecipes",payload:t})}))}};n(92);var P=Object(o.b)((function(e){return{recipes:e}}),(function(e){return{getRecipes:function(){e(k())},addRecipe:function(t){var n;e((n=t,function(e){A.a.post("/recipes/add",n).then((function(e){return console.log(e.data)})).then((function(){return e({type:"App@addRecipe"})})).then((function(){return e(k())})).then((function(){return console.log("Recipes fetched from db!")}))}))},deleteRecipe:function(t){var n;e((n=t,function(e){A.a.delete("/recipes/".concat(n)).then((function(e){return console.log(e.data)})),e({type:"App@deleteRecipe",payload:n})}))},setActiveRecipe:function(t){e({type:"App@setActiveRecipe",payload:t})},updateRecipe:function(t){var n;e((n=t,function(e){A.a.post("/recipes/update/".concat(n.edited._id),n).then((function(e){return console.log(e.data)})),e({type:"App@updateRecipe",payload:n})}))},setActiveVersion:function(t){e({type:"App@setActiveVersion",payload:t})},deleteVersion:function(t){var n;e((n=t,function(e){A.a.post("/recipes/version/".concat(n._id),n).then((function(e){return console.log(e.data)})),e({type:"App@deleteVersion",payload:n})}))}}}))((function(e){var t=e.getRecipes,n=e.addRecipe,i=e.deleteRecipe,c=e.setActiveRecipe,o=e.updateRecipe,s=e.deleteVersion,l=e.setActiveVersion,d=e.recipes,u=d.find((function(e){return e.isFocused}));return Object(a.useEffect)((function(){0===d.length&&t()}),[d,t]),r.a.createElement("div",{className:"app"},r.a.createElement("header",{className:"app-header"},r.a.createElement("h2",null,"Cookbook")),r.a.createElement("div",{className:"main"},r.a.createElement("div",{className:"section"},r.a.createElement("h5",null,"RECIPES"),r.a.createElement(h,{addRecipe:n}),d.length>0&&d.map((function(e){return r.a.createElement(w,{key:e.id,recipe:e,deleteRecipe:i,setActiveRecipe:c,addRecipe:n,updateRecipe:o})}))),r.a.createElement("div",{className:"section"},r.a.createElement("h5",null,"VERSIONS"),u&&u.oldVersions.map((function(e){return r.a.createElement(N,{key:e.id,_id:u._id,recipe:e,deleteVersion:s,setActiveVersion:l})})))))})),D=n(26),C=n(56),S=n(57),F=n(58);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=Object(D.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"App@getRecipes":return a.slice().reverse().map((function(e){return x({},e,{oldVersions:e.oldVersions.slice().reverse()})}));case"App@deleteRecipe":return e.filter((function(e){return e._id!==a}));case"App@setActiveRecipe":return e.map((function(e){return e=e.id===a?x({},e,{isFocused:!0}):x({},e,{isFocused:!1})}));case"App@updateRecipe":return e.map((function(e){return e._id===a.edited._id?x({},e,{name:a.edited.name,id:a.edited.id,ingredients:a.edited.ingredients,date:new Date(a.edited.id).toString().substr(0,24),oldVersions:[a.oldVersion].concat(Object(F.a)(e.oldVersions))}):e}));case"App@setActiveVersion":return e.map((function(e){return e.isFocused?x({},e,{oldVersions:e.oldVersions.map((function(e){return e=e.id===a?x({},e,{isFocused:!0}):x({},e,{isFocused:!1})}))}):e}));case"App@deleteVersion":return e.map((function(e){return e.isFocused?x({},e,{oldVersions:e.oldVersions.filter((function(e){return e.id!==a.id}))}):e}));default:return e}}),[],Object(C.composeWithDevTools)(Object(D.applyMiddleware)(S.a)));n(93),n(94);c.a.render(r.a.createElement(o.a,{store:_},r.a.createElement(P,null)),document.getElementById("root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.95797422.chunk.js.map